<div class="main-content clearfix">
<include file="left" />
<link rel="stylesheet" type="text/css" href="__CSS__/layout-recharge.css"/>
<script>
$(function(){
	var je=$("#ulMoneyList li");
	var dx=/\D/;
	je.click(function(){
		je.removeClass("selected");		
		var radio=je.index(this);
			//je.eq(radio).find("input").attr('checked','checked');
			je.eq(radio).addClass("selected");
		var valx=je.eq(radio).find("b").text();
		$("#Money").text(valx);
		$("#hidMoney").val(valx);
	});
	var tel=$("#txtOtherMoney").val();
	$("#txtOtherMoney").keyup(function(){	
		if(dx.test($("#txtOtherMoney").val())){
			$("#txtOtherMoney").val(tel);			
		}else{
			tel=$("#txtOtherMoney").val();
		}
		$("#Money").text(tel);
		$("#hidMoney").val(tel);
	}); 
})
</script>
<form id="toPayForm" name="toPayForm" action="" method="post" target="_blank">
<div class="R-content">
	<div class="member-t"><h2>账户充值</h2></div>
	<div class="select">
		<b class="gray01">请您选择充值金额</b>
		<ul id="ulMoneyList">
			<li class="selected" style="margin-left:0;"><label for="rd10">充值 <strong>￥</strong><b>10</b></label></li>
			<li><label for="rd50">充值 <strong>￥</strong><b>50</b></label></li>
			<li><label for="rd100">充值 <strong>￥</strong><b>100</b></label></li>
			<li><label for="rd200">充值 <strong>￥</strong><b>200</b></label></li>
			<li><label for="rd200">充值 <strong>￥</strong><b>500</b></label></li>
			
		</ul>
	</div>
	<div class="charge_money_list"> 
		<p class="much">应付金额：<span class="yf"><strong>￥</strong><span id="Money">10</span></span></p>
		<h6>			
				<input type="hidden" id="hidPayName" name="payName" value="">
				<input type="hidden" id="hidPayBank" name="payBank" value="0">
				<input type="hidden" id="hidMoney" name="money" value="10">
				<input id="btnrechange" class="bluebut imm" type="button" name="submit" value="立即充值" title="立即充值">
			</form>
		</h6>
		<div id="payAltBox" style="display:none;">
			<div class="prompt_box">
				<p class="pic"><em></em>请您在新开的页面上完成支付！</p>
				<p class="ts">付款完成之前，请不要关闭本窗口！<br>完成付款后跟据您的个人情况完成此操作！</p>
				<ul>
					<li><a href="{:U('userbalance', '', '')}" class="look" title="查看充值记录">查看充值记录 </a></li>
					<li><a href="javascript:gotoClick();" class="look" id="btnReSelect" title="重选支付方式">重选支付方式</a></li>
				</ul>
			</div>
		</div>
	</div>  
</div>
</div>
<script type="text/javascript" src="https://one.pingxx.com/lib/pingpp_one.js"></script>
<script type="text/javascript">
	$(function(){
		 $("#btnrechange").click(function(){
		 	  var vmoney=$("#Money").text();
			 	pingpp_one.init({
	            app_id:'app_5K8yzLfvnT4Gaj1S',                     //该应用在ping++的应用ID
	            order_no:'{data.rderNo}',                     		//订单在商户系统中的订单号
	            amount: parseInt(vmoney),                                   //订单价格，单位：人民币 分
	            // 壹收款页面上需要展示的渠道，数组，数组顺序即页面展示出的渠道的顺序
	            // upmp_wap 渠道在微信内部无法使用，若用户未安装银联手机支付控件，则无法调起支付
	            channel:['alipay_wap','wx_pub','upacp_wap','bfb_wap','upmp_wap'],
	            charge_url:"{:U('OrderPay/Index', '', '')}",  //商户服务端创建订单的url
	            charge_param:{
	            	sourceType:"recharge",
					a:1,
					b:2
	            },                      //(可选，用户自定义参数，若存在自定义参数则壹收款会通过 POST 方法透传给 charge_url)
	            open_id:'5K8yzLfvnT4Gaj1S'                             //(可选，使用微信公众号支付时必须传入)
	        },function(res){
	           // alert(res);
	            if(!res.status){
	                //处理错误
	                alert(res.chargeUrlOutput);
	                alert(res.msg);
	            }
	            else{
	                //若微信公众号渠道需要使用壹收款的支付成功页面
	                //则在这里进行成功回调，调用 pingpp_one.success 方法，你也可以自己定义回调函数
	                //其他渠道的处理方法请见第 2 节
	                pingpp_one.success(function(res){
	                    if(!res.status){
	                        alert(res.msg);
	                    }
	                },function(){
	                    //这里处理支付成功页面点击“继续购物”按钮触发的方法，例如：若你需要点击“继续购物”按钮跳转到你的购买页，
	                    //则在该方法内写入 window.location.href = "你的购买页面 url"
	                    window.location.href="{:U('Home/index', '', '')}";//示例
	                });
	            }
	        });
        
		 });
	});
</script>

<script>
$(function(){
		
	$("#submit_ok").click(function(){	
		if(!this.cc){
			this.cc = 1;		
			return true;
		}else{		
			return false;
		}		
		return false;
	});
	
	$(".yeepay_click li>img").click(function(){			
			$(this).prev().prop("checked",true);
	});

});
</script>